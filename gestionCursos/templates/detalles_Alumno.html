{% extends 'base.html' %}

{% block content %}
<div class="container">
    <h3>Buscar Alumno por DNI</h3>

    <form method="get" action="{% url 'detalles_Alumno' %}">
        <div class="form-group">
            <label for="dni">DNI</label>
            <input type="text" name="dni" id="dni" class="form-control" placeholder="Ingrese el DNI del alumno" value="{{ request.GET.dni }}">
        </div>
        <button type="submit" class="btn btn-primary">Buscar</button>
    </form>

    {% if error %}
        <div class="alert alert-danger mt-4">
            <p>{{ error }}</p>
        </div>
    {% elif alumno %}
        <div class="mt-4">
            <h4>Detalles del Alumno:</h4>
            <p><strong>Nombre y Apellido:</strong> {{ alumno.nombre }} {{ alumno.apellido }}</p>
            <p><strong>Fecha de Nacimiento:</strong> {{ alumno.fecha_nac }}</p>
            <p><strong>DNI:</strong> {{ alumno.dni }}</p>
            <p><strong>Dirección:</strong> {{ alumno.direccion }}</p>
        </div>

        <div class="mt-4">
            <h4>Cursos Inscritos:</h4>
            {% if cursos %}
                <ul class="list-group">
                    {% for curso in cursos %}
                        <li class="list-group-item">
                            <strong>Código:</strong> {{ curso.curso.codigo_curso }} - <strong>Tema:</strong> {{ curso.curso.tema }}
                            <div class="d-flex justify-content-between mt-2">
                                <p><strong>Nota:</strong> {{ curso.nota|default:"Pendiente" }}</p>
                                <a href="{% url 'modificar_nota'  alumno.id curso.curso.codigo_curso %}" class="btn btn-secondary btn-sm">Agregar/Modificar Nota</a>
                            </div>
                        </li>
                    {% endfor %}
                </ul>
            {% else %}
                <p class="text-muted">Este alumno no está inscrito en ningún curso.</p>
            {% endif %}
        </div>
    {% endif %}
</div>
{% endblock %}


